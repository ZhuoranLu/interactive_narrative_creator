# ğŸš€ Interactive Narrative Creator å¯åŠ¨æŒ‡å—

## ç®€ç­”å›ç­”æ‚¨çš„é—®é¢˜
**æ˜¯çš„ï¼Œæ‚¨éœ€è¦å…ˆå¯åŠ¨æ•°æ®åº“ï¼Œç„¶åå†å¯åŠ¨åº”ç”¨ã€‚** ä½†æˆ‘ä»¬å·²ç»ä¸ºæ‚¨ç®€åŒ–äº†è¿™ä¸ªè¿‡ç¨‹ï¼

## ğŸ¯ æœ€ç®€å•çš„å¯åŠ¨æ–¹å¼

### æ–¹æ³• 1: ä¸€é”®å¯åŠ¨ (æ¨è)
```bash
./start_app.sh
```
è¿™ä¸ªè„šæœ¬ä¼šï¼š
- è‡ªåŠ¨æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
- å¦‚æœæ•°æ®åº“æ²¡è¿è¡Œï¼Œè‡ªåŠ¨å¯åŠ¨å®ƒ
- æµ‹è¯•æ•°æ®åº“è¿æ¥
- å¯åŠ¨ FastAPI åº”ç”¨

### æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨
```bash
# 1. å¯åŠ¨æ•°æ®åº“ (äºŒé€‰ä¸€)
brew services start postgresql@14        # æœ¬åœ° PostgreSQL
# æˆ–
docker-compose up -d db                  # Docker PostgreSQL

# 2. å¯åŠ¨åº”ç”¨
cd server
uvicorn app.main:app --reload
```

## ğŸ“‹ è¯¦ç»†è¯´æ˜

### å½“å‰çŠ¶æ€
- âœ… **PostgreSQL æ­£åœ¨è¿è¡Œ** (æœ¬åœ°å®‰è£…ç‰ˆæœ¬)
- âœ… **æ•°æ®åº“å·²åˆ›å»º**: `narrative_creator` 
- âœ… **æ‰€æœ‰è¡¨å·²åˆ›å»º**: é¡¹ç›®ã€èŠ‚ç‚¹ã€äº‹ä»¶ç­‰
- âœ… **é…ç½®æ­£ç¡®**: è¿æ¥å­—ç¬¦ä¸²ã€ç¯å¢ƒå˜é‡ç­‰

### å¯åŠ¨é¡ºåº
1. **æ•°æ®åº“** å¿…é¡»å…ˆå¯åŠ¨ (PostgreSQL)
2. **åº”ç”¨** åå¯åŠ¨ (FastAPI)

### å¯ç”¨çš„å¯åŠ¨è„šæœ¬

| è„šæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|
| `./start_app.sh` | å¯åŠ¨åº”ç”¨ | è‡ªåŠ¨æ£€æŸ¥å¹¶å¯åŠ¨æ•°æ®åº“ï¼Œç„¶åå¯åŠ¨åº”ç”¨ |
| `./stop_app.sh` | åœæ­¢åº”ç”¨ | åœæ­¢åº”ç”¨ï¼Œå¯é€‰æ‹©æ˜¯å¦åœæ­¢æ•°æ®åº“ |
| `./setup_postgres.sh` | é¦–æ¬¡è®¾ç½® | å®Œæ•´çš„ PostgreSQL è®¾ç½®å’Œåˆå§‹åŒ– |

## ğŸ”§ ä¸åŒç¯å¢ƒçš„å¯åŠ¨æ–¹å¼

### å¼€å‘ç¯å¢ƒ (å½“å‰é…ç½®)
```bash
# æ•°æ®åº“: æœ¬åœ° PostgreSQL (Homebrew)
# ä¼˜ç‚¹: æ€§èƒ½å¥½ï¼ŒæŒä¹…åŒ–ï¼Œé‡å¯åæ•°æ®ä¿ç•™
./start_app.sh
```

### Docker ç¯å¢ƒ
```bash
# æ•°æ®åº“: Docker PostgreSQL
# ä¼˜ç‚¹: ç¯å¢ƒä¸€è‡´ï¼Œæ˜“äºåˆ†äº«
docker-compose up -d db
cd server && uvicorn app.main:app --reload
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ•°æ®åº“: è¿œç¨‹ PostgreSQL
# ä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„ DATABASE_URL
cd server && uvicorn app.main:app --host 0.0.0.0 --port 8000
```

## ğŸŒ è®¿é—®åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œæ‚¨å¯ä»¥è®¿é—®ï¼š
- **ä¸»åº”ç”¨**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **ReDoc æ–‡æ¡£**: http://localhost:8000/redoc

## ğŸ›‘ åœæ­¢åº”ç”¨

```bash
# åœæ­¢åº”ç”¨å’Œå¯é€‰æ‹©åœæ­¢æ•°æ®åº“
./stop_app.sh

# æˆ–æ‰‹åŠ¨åœæ­¢
Ctrl+C  # åœæ­¢ FastAPI åº”ç”¨
brew services stop postgresql@14  # åœæ­¢æ•°æ®åº“ (å¯é€‰)
```

## â“ æ•…éšœæ’é™¤

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
brew services list | grep postgresql

# é‡å¯æ•°æ®åº“
brew services restart postgresql@14

# æµ‹è¯•è¿æ¥
cd server && python -c "from app.database import engine; engine.connect()"
```

### ç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£ 8000 çš„è¿›ç¨‹
lsof -i :8000

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

### æƒé™é—®é¢˜
```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x start_app.sh stop_app.sh setup_postgres.sh
```

## ğŸ“š æ›´å¤šä¿¡æ¯

- è¯¦ç»†æ•°æ®åº“é…ç½®: [server/DATABASE_README.md](server/DATABASE_README.md)
- ç¯å¢ƒå˜é‡é…ç½®: [server/.env](server/.env)
- API æ–‡æ¡£: å¯åŠ¨åº”ç”¨åè®¿é—® `/docs`

---

**æ€»ç»“**: ç°åœ¨æ‚¨åªéœ€è¦è¿è¡Œ `./start_app.sh` å°±å¯ä»¥å¯åŠ¨æ•´ä¸ªåº”ç”¨äº†ï¼ğŸ‰ 